{
  "hash": "7ade16c05eaa6d42be6475a13dc71e2e",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Land values\"\neditor: visual\n---\n\n\n\nThe [Globe and Mail reported](https://www.theglobeandmail.com/real-estate/vancouver/article-vancouver-housing-troubles-make-for-hot-summer-reading/) that\n\n> \"between 2006 and 2022, Vancouver building values stayed the same while the land value increased by more than 500 per cent\".\n\nTo anyone familiar with Vancouver during this time frame the claim that \"building values stayed the same\" seems questionable. This brings us to our question.\n\n## Question\n\n**How have land and building values in Vancouver changed since 2005 (2006 tax assessment year)?**\n\n## Data sources\n\nLand and building values are assessed separately by BC Assessment, and we will piggy-back of their estimates instead of trying to estimate them ourselves. The City of Vancouver makes assessment data for the City [available on their Open Data Portal](https://opendata.vancouver.ca/pages/home/).\n\n## Data acquisition\n\nThe VanouvR package [@vancouvr2019] makes it easy to access this data in R and [one of the package vignettes](https://mountainmath.github.io/VancouvR/articles/Demo.html) has code that does pretty much what we need.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(VancouvR)\n```\n:::\n\n\n\nThe datasets in question are the `property-tax-report`, due to size the data is split over several datasets.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsearch_cov_datasets(\"property-tax-report\") |>\n  select(dataset_id,title)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 4 x 2\n  dataset_id                    title                        \n  <chr>                         <chr>                        \n1 property-tax-report-2016-2019 Property tax report 2016-2019\n2 property-tax-report-2011-2015 Property tax report 2011-2015\n3 property-tax-report           Property tax report          \n4 property-tax-report-2006-2010 Property tax report 2006-2010\n```\n\n\n:::\n:::\n\n\n\nThe first tax assessment year in the dataset is for 2006, the last one is for the current year, 2024 as of the writing of this. Assessments are pegged to July 1st of the previous year, so we have data for all years from July 2005 through 2023. This is likely the same data source that news article used, except that the article did not adjust to the date the assessments are pegged to.\n\nFor our purposes all we need is aggregates for each year, the Open Data Portal allows server side aggregation of data and the R package supports that. This cuts down on time and the amount of data we need to transfer. We simply group by tax assessment year and aggregate up the assessed land and building values for each year.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nland_building_data_raw <-search_cov_datasets(\"property-tax-report\") |>\n    pull(dataset_id) |>\n    map_df(function(ds) aggregate_cov_data(\n      ds,\n      group_by=\"tax_assessment_year as Year\",\n      select=\"sum(current_land_value) as Land, sum(current_improvement_value) as Building\")) |>\n  arrange(Year)\n```\n:::\n\n\n\nThis gives us a simple data frame with land and building values for each year. We check on the tax years in question, as well as the most recent one.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nland_building_data_raw |> \n  filter(Year %in% c(2006,2022,max(Year))) |>\n  tinytable::tt()\n```\n\n::: {.cell-output-display}\n\\begin{table}\n\\centering\n\\begin{tblr}[         %% tabularray outer open\n]                     %% tabularray outer close\n{                     %% tabularray inner open\ncolspec={Q[]Q[]Q[]},\n}                     %% tabularray inner close\n\\toprule\nYear & Land & Building \\\\ \\midrule %% TinyTableHeader\n2006 &  88649668277 &  35086836003 \\\\\n2022 & 394201892132 & 102591491465 \\\\\n2024 & 415679362031 & 105858810250 \\\\\n\\bottomrule\n\\end{tblr}\n\\end{table}\n:::\n:::\n\n\n\n## Data preparation\n\nThere is not much to do here, we remember that assessments are pegged to July 1st in the previous year and reshape the data into long form.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nland_building_data <- land_building_data_raw |>\n    mutate(Date=as.Date(paste0(as.integer(Year)-1,\"-07-01\"))) |>\n    pivot_longer(c(\"Land\",\"Building\"),names_to = \"Component\")\n```\n:::\n\n\n\n## Analysis and visualization\n\nLet's take a quick look what that data looks like.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(land_building_data,aes(x=Date,y=value,colour=Component)) +\n  geom_line() +\n  scale_y_continuous(labels=\\(x)scales::dollar(x,scale=10^-9,suffix=\"bn\")) +\n  expand_limits(y=0) +\n  labs(title=\"City of Vancouver assessed land and building values\",\n       y=\"Assessed value\",\n       x=NULL,\n       caption=\"CoV Open Data\")\n```\n\n::: {.cell-output-display}\n![](land_values_files/figure-pdf/fig-land_building_data-1.png){#fig-land_building_data fig-pos='H'}\n:::\n:::\n\n\n\nSo far so good, but we should probably account for inflation. We borrow code from the [section on income change](/canadian_data/basic_descriptive/geography_of_income_change.html) to pull CPI data and fold it in.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(cansim)\ninflation <- get_cansim_vector(\"v41693271\") |>\n  mutate(Date=Date %m+% months(6)) |>\n  select(Date,CPI=val_norm) |>\n  filter(Date %in% land_building_data$Date) |>\n  mutate(CPI=CPI/last(CPI,order_by = Date))\n\nland_building_data |>\n  left_join(inflation,by=\"Date\") |>\nggplot(aes(x=Date,y=value/CPI,colour=Component)) +\n  geom_line() +\n  scale_y_continuous(labels=\\(x)scales::dollar(x,scale=10^-9,suffix=\"bn\")) +\n  expand_limits(y=0) +\n  labs(title=\"City of Vancouver assessed land and building values\",\n       y=\"Assessed value (July 2023 dollars)\",\n       x=NULL,\n       caption=\"CoV Open Data\")\n```\n\n::: {.cell-output-display}\n![](land_values_files/figure-pdf/fig-land_building_data_inflation-1.png){#fig-land_building_data_inflation fig-pos='H'}\n:::\n:::\n\n\n\nAs we might have expected, values rose faster than inflation, but they did so for buildings as well as for land. The land value change is impressive, but it's hard to judge that against the building value change, which started at a much lower value. The article looked at percentage change, so let's do the same.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_data <- land_building_data |>\n  left_join(inflation,by=\"Date\") |>\n  mutate(real_value=value/CPI) |>\n  mutate(real_ratio = real_value/first(real_value,order_by=Date),\n         ratio = value/first(value,order_by=Date),\n         .by=Component)\n\nggplot(plot_data,aes(x=Date,y=real_ratio,colour=Component)) +\n  geom_line() +\n  scale_y_continuous(labels=scales::percent,trans=\"log\",breaks=seq(1,5)) +\n  labs(title=\"City of Vancouver assessed land and building values\",\n       y=\"Real change since July 1, 2005\",\n       x=NULL,\n       caption=\"CoV Open Data\")\n```\n\n::: {.cell-output-display}\n![](land_values_files/figure-pdf/fig-land_building_data_ratio-1.png){#fig-land_building_data_ratio fig-pos='H'}\n:::\n:::\n\n\n\nSince this is ratio data we chose a logarithmic scale on the y-axis. This shows that between 2005 and 2021 (so using assessment years 2006 and 2022) real land values increased by 336% and building values by 221% . Maybe the article was using nominal value increases, in nominal terms land increased by 445% and building values by 292%.\n\n## Interpretation\n\nThe increase in land values is lower than the \"more than 500 per cent\" claimed in the article, and the claim that \"building values stayed the same\" is clearly false.\n\nWhat is clear is that land values have risen faster than building values, likely in large part because restrictive zoning has prevented buildings from making adequate use of the land they are on.\n\nIt could be that the article mis-quoted its sources and the claim was about a sub-set of Vancouver properties, maybe just residential properties, or just single-family properties. We make a rather crude estimate by filtering the data on RS-1 and R1-1 zoning districts. This will under-estimate the growth a bit as properties that got rezoned within this timeframe will be included in the earlier years but not in the later ones.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsearch_cov_datasets(\"property-tax-report\") |>\n    pull(dataset_id) |>\n    map_df(function(ds) aggregate_cov_data(\n      ds,\n      group_by=\"tax_assessment_year as Year\",\n      where=\"zoning_district like 'RS-' or zoning_district like 'R1-1'\",\n      select=\"sum(current_land_value) as Land, sum(current_improvement_value) as Building\")) %>% \n    mutate(Date=as.Date(paste0(as.integer(Year)-1,\"-07-01\"))) |>\n    pivot_longer(c(\"Land\",\"Building\"),names_to = \"Component\") |>\n  left_join(inflation,by=\"Date\") |>\n  mutate(real_value=value/CPI) |>\n  mutate(real_ratio = real_value/first(real_value,order_by=Date),\n         ratio = value/first(value,order_by=Date),\n         .by=Component) |>\nggplot(aes(x=Date,y=real_ratio,colour=Component)) +\n  geom_line() +\n  scale_y_continuous(labels=scales::percent,trans=\"log\",breaks=seq(1,5)) +\n  expand_limits(y=0) +\n  labs(title=\"City of Vancouver assessed land and building values in RS/R1-1 zones\",\n       y=\"Real change since July 1, 2005\",\n       x=NULL,\n       caption=\"CoV Open Data\")\n```\n\n::: {.cell-output-display}\n![](land_values_files/figure-pdf/fig-land_building_data_ratio_rs-1.png){#fig-land_building_data_ratio_rs fig-pos='H'}\n:::\n:::\n\n\n\nAgain, the claim that building values stayed the same has no basis in reality. Readers interested in more detail are encouraged to use individual property data and match individual lots over time to further refine these estimates.\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {
      "knitr": [
        "{\"type\":\"list\",\"attributes\":{\"knit_meta_id\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"\",\"\"]}},\"value\":[{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"float\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"tabularray\"]},{\"type\":\"NULL\"},{\"type\":\"character\",\"attributes\":{},\"value\":[\"\\\\usepackage[normalem]{ulem}\",\"\\\\usepackage{graphicx}\",\"\\\\UseTblrLibrary{booktabs}\",\"\\\\UseTblrLibrary{siunitx}\",\"\\\\NewTableCommand{\\\\tinytableDefineColor}[3]{\\\\definecolor{#1}{#2}{#3}}\",\"\\\\newcommand{\\\\tinytableTabularrayUnderline}[1]{\\\\underline{#1}}\",\"\\\\newcommand{\\\\tinytableTabularrayStrikeout}[1]{\\\\sout{#1}}\"]}]}]}"
      ]
    },
    "preserve": null,
    "postProcess": false
  }
}