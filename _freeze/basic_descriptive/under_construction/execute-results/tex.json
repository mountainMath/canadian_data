{
  "hash": "732b3239d5494e92354ca30ab3514f75",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Under construction\"\neditor: visual\n---\n\n\n\nUnits under construction give some indication of construction activity beyond starts and completions.\n\n## Question\n\n**How many homes are currently under construction in Toronto?**\n\n## Data sources\n\nCMHC tracks information on housing starts and completions. And the number of homes under construction, that is dwelling units that have started but aren't yet completed.\n\n[CMHC defines a housing \"start\"](https://www.cmhc-schl.gc.ca/en/professionals/housing-markets-data-and-research/housing-research/surveys/methods/methodologies-starts-completions-market-absorption-survey) as the time when the foundation is finished, so digging a parking crater and building below ground happens before what CMHC calls a building \"start\". This might differ from how one might colloquially think about units under construction, as there can be significant construction activity before a \"start\". But this probably comes reasonably close to our question of interest.\n\n## Data acquisition\n\nThe [**cmhc** package](https://mountainmath.github.io/cmhc/) facilitates importing data from CMHC. This pries data out the [Housing Market Information Portal](https://www03.cmhc-schl.gc.ca/hmip-pimh/en) where data is organized across a variety of tables. The easiest way to locate a table of interest is to use the `select_cmhc_table()` function from the **cmhc** package in the console to interactively step through the process. In our case, we are interested in data from the Starts and Completions Survey (**Scss**), look at the **Under Construction** series, after which we can select to have data broken down by B**edroom Type** or I**ntended Market**, where we select the former. Lastly we need to decide the breakdown type, either a level of geography or **Historical Time Periods** for a fixed geography, which is what we are interested in.\n\nGoing through this process gives us the code we need to access the data, all we need to do is fill in the geographic identifier. The **cmhc** package is designed to work in conjunction with other census data, so it uses the same geographic identifiers and translates them to CMHC's own internal geographic identifiers under the hood. For Toronto, we need to decide if we are interested in the City of the metro area and grab the geographic identifier from the [CensusMapper API tool](https://censusmapper.ca/api/). We will query data for the City of Toronto with standard StatCan geographic identifier \"3520005\" .\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(cmhc)\nunder_construction <- get_cmhc(survey = \"Scss\", \n                               series = \"Under Construction\", \n                               dimension = \"Dwelling Type\", \n                               breakdown = \"Historical Time Periods\", \n                               geo_uid = \"3520005\") \n```\n:::\n\n\n\n## Data preparation\n\nThere is really not much to do here, let's just inspect what the data looks like\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nunder_construction |> head()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 x 7\n  GeoUID  Date       DateString `Dwelling Type` Value Survey Series            \n  <chr>   <date>     <chr>      <fct>           <dbl> <chr>  <chr>             \n1 3520005 1998-01-01 Jan 1998   Single            838 Scss   Under Construction\n2 3520005 1998-01-01 Jan 1998   Semi-Detached     132 Scss   Under Construction\n3 3520005 1998-01-01 Jan 1998   Row               838 Scss   Under Construction\n4 3520005 1998-01-01 Jan 1998   Apartment        3008 Scss   Under Construction\n5 3520005 1998-01-01 Jan 1998   All              4816 Scss   Under Construction\n6 3520005 1998-02-01 Feb 1998   Single            738 Scss   Under Construction\n```\n\n\n:::\n:::\n\n\n\n## Analysis and visualization\n\nWhat's left is to plot the data, broken out by dwelling type.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(under_construction, aes(x=Date,y=Value,colour=`Dwelling Type`)) +\n  geom_line() +\n  scale_y_continuous(labels=scales::comma) +\n  labs(title=\"City of Toronto dwelling units under construction\",\n       x=NULL,y=\"Number of units\", caption=\"CMHC Scss\")\n```\n\n::: {.cell-output-display}\n![](under_construction_files/figure-pdf/unnamed-chunk-3-1.png){fig-pos='H'}\n:::\n:::\n\n\n\nIt looks like the number of units under construction, especially apartment units, has increased considerably over time. Let's cross-check that against housing starts. These tend to be quite noisy, so we go to annual frequency instead of monthly. We can adapt the code above for data acquisition and graphing into one chunk.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nget_cmhc(survey = \"Scss\", \n         series = \"Starts\", \n         dimension = \"Dwelling Type\", \n         breakdown = \"Historical Time Periods\", \n         frequency = \"Annual\",\n         geo_uid = \"3520005\") |>\n  ggplot(aes(x=Date,y=Value,colour=`Dwelling Type`)) +\n  geom_line() +\n  scale_y_continuous(labels=scales::comma) +\n  labs(title=\"City of Toronto dwelling unit starts\",\n       x=NULL,y=\"Number of units\", caption=\"CMHC Scss\")\n```\n\n::: {.cell-output-display}\n![](under_construction_files/figure-pdf/unnamed-chunk-4-1.png){fig-pos='H'}\n:::\n:::\n\n\n\nStarts have increased, but not that much. Something else must be at play too, let's look at how length of construction has changed over this timeframe, again using annual data to cut down on noise.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nget_cmhc(survey = \"Scss\", \n         series = \"Length of Construction\", \n         dimension = \"Dwelling Type\", \n         breakdown = \"Historical Time Periods\", \n         frequency = \"Annual\",\n         geo_uid = \"3520005\") |>\n  ggplot(aes(x=Date,y=Value,colour=`Dwelling Type`)) +\n  geom_line() +\n  scale_y_continuous(labels=scales::comma) +\n  labs(title=\"City of Toronto dwelling unit starts\",\n       x=NULL,y=\"Average length of construction (months)\",\n       caption=\"CMHC Scss\")\n```\n\n::: {.cell-output-display}\n![](under_construction_files/figure-pdf/unnamed-chunk-5-1.png){fig-pos='H'}\n:::\n:::\n\n\n\nAnd indeed, the length of construction shot up a lot, for apartments from around 13 months in the late 90s to about 30 months around 2020. That means we now have over twice as many construction sites for the same number of units coming to market compared to the late 90s.\n\nThe sharp increase in construction time for Semi-detached and row houses might well be a data anomaly, where low and dropping number of starts of such units can be disproportionally impacted by a couple of stalled projects.\n\n## Interpretation\n\nThe units under construction has increased a lot in the City of Toronto, due to the combined effects of increasing building starts as well as a more than doubling of average time to complete these units.\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {
      "knitr": [
        "{\"type\":\"list\",\"attributes\":{},\"value\":[]}"
      ]
    },
    "preserve": null,
    "postProcess": false
  }
}